<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>HTML Panel Tips #25: CC 2018 Survival Guide | Davide Barranca &mdash; Photoshop, etc. </title>
    <meta property="og:title" content="HTML Panel Tips #25: CC 2018 Survival Guide | Davide Barranca &mdash; Photoshop, etc. " />
    <meta name="twitter:title" content="HTML Panel Tips #25: CC 2018 Survival Guide | Davide Barranca &mdash; Photoshop, etc. " />

    <meta name="description" content="What's new in CEP 8 for Photoshop HTML Panels developers. Information you'd better know to successfully migrate your extensions to CC 2018">
    <meta name="description" property="og:description" content="What's new in CEP 8 for Photoshop HTML Panels developers. Information you'd better know to successfully migrate your extensions to CC 2018" />
    <meta name="twitter:description" content="What's new in CEP 8 for Photoshop HTML Panels developers. Information you'd better know to successfully migrate your extensions to CC 2018" />

    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:site" content="@undavide" />
    
    <meta property="og:url" content="https://elegant-davinci-7a1889.netlify.com/2017/10/html-panel-tips-25-cc-2018-survival-guide/" />

    <meta property="og:image" content="" />
    <meta name="twitter:image" content="" />

    <meta name="author" content="Davide Barranca" />

    <meta name="copyright" content="Copyright by Davide Barranca. All Rights Reserved." />

    <style>
        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 300;
            src: local('Roboto Light'), local('Roboto-Light'), url(https://fonts.gstatic.com/s/roboto/v15/Hgo13k-tfSpn0qi1SFdUfVtXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 400;
            src: local('Roboto'), local('Roboto-Regular'), url(https://fonts.gstatic.com/s/roboto/v15/CWB0XYA8bzo0kSThX0UTuA.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 700;
            src: local('Roboto Bold'), local('Roboto-Bold'), url(https://fonts.gstatic.com/s/roboto/v15/d-6IYplOFocCacKzxwXSOFtXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 900;
            src: local('Roboto Black'), local('Roboto-Black'), url(https://fonts.gstatic.com/s/roboto/v15/mnpfi9pxYH-Go5UiibESIltXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 300;
            src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(https://fonts.gstatic.com/s/roboto/v15/7m8l7TlFO-S3VkhHuR0at44P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 400;
            src: local('Roboto Italic'), local('Roboto-Italic'), url(https://fonts.gstatic.com/s/roboto/v15/vPcynSL0qHq_6dX7lKVByfesZW2xOQ-xsNqO47m55DA.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 700;
            src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(https://fonts.gstatic.com/s/roboto/v15/t6Nd4cfPRhZP44Q5QAjcC44P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 900;
            src: local('Roboto Black Italic'), local('Roboto-BlackItalic'), url(https://fonts.gstatic.com/s/roboto/v15/bmC0pGMXrhphrZJmniIZpY4P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }
    </style>
    
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    
    <link rel="stylesheet" href="https://elegant-davinci-7a1889.netlify.com/assets/css/main.css">

    <link rel="canonical" href="https://elegant-davinci-7a1889.netlify.com/2017/10/html-panel-tips-25-cc-2018-survival-guide/">

    <link rel="alternate" type="application/rss+xml" title="" href="https://elegant-davinci-7a1889.netlify.com/feed.xml">

    

    
    <script>
      function UnCryptMailto(s) {
        var n = 0;
        var r = "";
        for (var i = 0; i < s.length; i++) {
          n = s.charCodeAt(i);
          if (n >= 8364) {
            n = 128;
          }
          r += String.fromCharCode(n - 1);
        }
        return r;
      }

      function linkTo_UnCryptMailto(s) {
        location.href = UnCryptMailto(s);
      }
    </script>
    
</head>


    <body>
        <div class="wrapper">
            <aside class="user-profile fixed" role="complementary">
    <div class="burger">
        <input class="trigger hidden" id="toggleBurger" type="checkbox" />
        <label for="toggleBurger">
            <span>Navigation</span>
        </label>
    </div>

    <div class="compact-header">
        <a class="avatar" href="https://elegant-davinci-7a1889.netlify.com"><img alt="Avatar" src="/assets/img/io.jpg" /></a>
        <div class="my-info">
            <strong class="my-name">Davide Barranca</strong>
            <span class="my-job-title">Photoshop, etc.</span>
        </div>
    </div>

    
        
        <div class="mainmenu">
            <a href="https://elegant-davinci-7a1889.netlify.com" >Blog</a>
            
                
            
                
            
                
            
                
                    <a href="https://elegant-davinci-7a1889.netlify.com/books/" >Books</a>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        </div>
        
    

    <p class="about-me">Digital Caveman. Photoshop retoucher and script/panels developer. I also publish courses, check the Books page!</p>

    <ul class="socials">
        <li><a href="https://www.facebook.com/undavide"><svg title="facebook" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://elegant-davinci-7a1889.netlify.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></li><li><a href="https://twitter.com/undavide"><svg title="twitter" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://elegant-davinci-7a1889.netlify.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li><li><a href="https://github.com/undavide"><svg title="github" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://elegant-davinci-7a1889.netlify.com/assets/svg/social-icons.svg#github-icon"></use></svg></a></li>

        
            <!-- WAS: <a href="mailto:davide.barranca@gmail.com">  -->
            <li><a href="javascript:linkTo_UnCryptMailto('nbjmup;ebwjef/cbssbodbAhnbjm/dpn');" title="Drop me an email"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://elegant-davinci-7a1889.netlify.com/assets/svg/social-icons.svg#email-icon"></use></svg></a></li>
        

        
         <li><a href="https://elegant-davinci-7a1889.netlify.com/feed.xml"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://elegant-davinci-7a1889.netlify.com/assets/svg/social-icons.svg#rss-icon"></use></svg></a></li>
        
    </ul>
</aside>


            <main class="the-content" role="main">
                <div class="search" role="search">
    <div>
        <div class="show-results-count">0 Results</div>
        <div class="search-holder">
            <input type="text" id="search-input" placeholder="search for..." />
        </div>
    </div>
    <ul id="results-container" class="results-container"></ul>
</div>


                <article class="post single" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2017-10-23T01:04:41+02:00" itemprop="datePublished">23 Oct, 2017</time></li>
            
                
                <li class="cats">
                    
                        <a href="/categories/CEP/">CEP</a>
                    
                </li>
                
            
        </ul>
        <h2 itemprop="name headline">HTML Panel Tips #25: CC 2018 Survival Guide</h2>
    </header>

    <div class="post-content">
        <p>That time of the year has come, and Photoshop CC 2018 is here. Read along to find out Everything You Always Wanted to Know About CEP 8 (But Were Afraid to Ask). A brief history of Photoshop’s HTML Panels support for your pleasure:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">CC Version</th>
      <th style="text-align: center">PS Internal Version</th>
      <th style="text-align: center"> </th>
      <th style="text-align: center">CEP Version</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Photoshop CC</td>
      <td style="text-align: center">14.x</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">4.0</td>
    </tr>
    <tr>
      <td style="text-align: left">Photoshop CC 2014</td>
      <td style="text-align: center">15.x</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">5.0</td>
    </tr>
    <tr>
      <td style="text-align: left">Photoshop CC 2015</td>
      <td style="text-align: center">16.x</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">6.0</td>
    </tr>
    <tr>
      <td style="text-align: left">Photoshop CC 2015.5</td>
      <td style="text-align: center">17.x</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">7.0</td>
    </tr>
    <tr>
      <td style="text-align: left">Photoshop CC 2017</td>
      <td style="text-align: center">18.x</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">7.0</td>
    </tr>
    <tr>
      <td style="text-align: left">Photoshop CC 2018</td>
      <td style="text-align: center">19.x</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">8.0</td>
    </tr>
  </tbody>
</table>

<p>Set aside the weird correspondence in the above version numbers, you see that we’ve jumped to CEP 8, and Photoshop internal version is now 19.0.0.</p>

<h3 id="versions">Versions</h3>

<p>CEF has been bumped to 3.2987, Chromium is 57.0.2987.74 (leap of faith because for some mysterious reason <code class="highlighter-rouge">window.location = "chrome://version"</code> doesn’t work anymore) and Node.js is 7.7.4, whereas Generator’s Node.js is 4.8.4. Enough with digits, let’s dig into actual stuff. You’d be tempted to use <code class="highlighter-rouge">Version="8.0"</code> in manifest.xml, like:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;ExtensionManifest</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="na">ExtensionBundleId=</span><span class="s">"com.example.helloWorld"</span>
  <span class="na">ExtensionBundleVersion=</span><span class="s">"1.0.0"</span> <span class="na">Version=</span><span class="s">"8.0"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ExtensionList&gt;</span>
    <span class="nt">&lt;Extension</span> <span class="na">Id=</span><span class="s">"com.example.helloWorld.panel"</span> <span class="na">Version=</span><span class="s">"1.0.0"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/ExtensionList&gt;</span>
  <span class="nt">&lt;ExecutionEnvironment&gt;</span>
    <span class="nt">&lt;HostList&gt;</span>
      <span class="nt">&lt;Host</span> <span class="na">Name=</span><span class="s">"PHXS"</span> <span class="na">Version=</span><span class="s">"19.0"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;Host</span> <span class="na">Name=</span><span class="s">"PHSP"</span> <span class="na">Version=</span><span class="s">"19.0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/HostList&gt;</span>
    <span class="nt">&lt;LocaleList&gt;</span>
      <span class="nt">&lt;Locale</span> <span class="na">Code=</span><span class="s">"All"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/LocaleList&gt;</span>
    <span class="nt">&lt;RequiredRuntimeList&gt;</span>
      <span class="nt">&lt;RequiredRuntime</span> <span class="na">Name=</span><span class="s">"CSXS"</span> <span class="na">Version=</span><span class="s">"8.0"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/RequiredRuntimeList&gt;</span>
  <span class="nt">&lt;/ExecutionEnvironment&gt;</span>
  <span class="c">&lt;!-- etc. --&gt;</span>
<span class="nt">&lt;/ExtensionManifest&gt;</span></code></pre></figure>

<p>Tempting, but <strong>don’t do it</strong>. <code class="highlighter-rouge">Version</code> in <code class="highlighter-rouge">&lt;ExtensionManifest&gt;</code> and <code class="highlighter-rouge">&lt;RequiredRuntime&gt;</code> has always matched CEP version, but in this case setting the two to <code class="highlighter-rouge">"8.0"</code> will make your panel disappear from the Window &gt; Extensions menu. Why? We’re in the same boat, I’ve asked around but got no plausible answer yet. Stick to <code class="highlighter-rouge">"7.0"</code>.</p>

<h3 id="csinterface">CSInterface</h3>

<p>I’ve inspected the diffs between CSInterface.js (CEP 7 vs. CEP 8) and it’s just punctuation in comments. LOL.</p>

<h3 id="debugging">Debugging</h3>

<p>Debugging tips: Google Chrome 62.0.3202.62 (Official Build) (64-bit) at least on macOS Sierra 10.12.6 can’t connect anymore a debug session. It seems it can: you successfully load localhost:8088 (or whatever port you’re using) and the usual textual link appears. Click it, and you’re staring at a blank Chrome Developer Tools page. Out of curiosity I opened the Console and got a “Uncaught Error: No setting registered: showAdvancedHeapSnapshotProperties” referring to <code class="highlighter-rouge">inspector.js</code>.</p>

<p><img src="/wp-content/uploads/2017/10/console-700x226.png" alt="" /></p>

<p>Workaround: download <a href="https://chromium.woolyss.com/download/en/#mac">Google Chromium</a>. The theory is that you should test your panel with the exact Chromium version implemented in the host application: yet, finding it is a majestic pain in the butt if you try to follow the <a href="https://www.chromium.org/getting-involved/download-chromium">official instruction</a> for old builds. The closest one I’ve been able to get is 57.0.2987.0 and you can get it too <a href="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/444967/">here</a>. For debugging in a working DevTool, Chromium-latest should work too.</p>

<h3 id="nodejs">Node.js</h3>

<p>There must be some kind of bloody war going on at the Adobe headquarters around Node.js. Only between CC 2015.0 and CC 2015.1.2 its implementation changed thrice, and of course there’s something new and backward not compatible in CEP 8 as well. Anyway, the State of the Art is as follows. Node is still <strong>disabled by default</strong>. Very like with CEP 7, if you want to enable it, add these in the <code class="highlighter-rouge">manifest.xml</code>:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Resources&gt;</span>
  <span class="nt">&lt;CEFCommandLine&gt;</span>
    <span class="nt">&lt;Parameter&gt;</span>--enable-nodejs<span class="nt">&lt;/Parameter&gt;</span>
    <span class="nt">&lt;Parameter&gt;</span>--mixed-context<span class="nt">&lt;/Parameter&gt;</span>
  <span class="nt">&lt;/CEFCommandLine&gt;</span></code></pre></figure>

<p>Mind you, <code class="highlighter-rouge">--mixed-context</code> is optional. So you basically have three possible scenarios:</p>

<ol>
  <li>Forget about Node entirely (no <code class="highlighter-rouge">--enable-nodejs</code> flag): it’s disabled.</li>
  <li>Enable Node in a <strong>Separate Context</strong> (<code class="highlighter-rouge">--enable-nodejs</code> but no <code class="highlighter-rouge">--mixed-context</code>).</li>
  <li>Enable Node in a <strong>Mixed Context</strong> (<code class="highlighter-rouge">--enable-nodejs</code> and <code class="highlighter-rouge">--mixed-context</code>).</li>
</ol>

<p>As a quick reminder on Contexts, due to the <code class="highlighter-rouge">io.js</code> switch back in an earlier version, I’ve been told, Node.js and the Browser/Panel contexts don’t talk to each other anymore. What does this mean? If you have a Node.js module and try to access the jQuery <code class="highlighter-rouge">$</code> object, or <code class="highlighter-rouge">csInterface</code>, or anything else defined in the Browser context (e.g. your <code class="highlighter-rouge">main.js</code> file), it won’t work. Workaround: use the global <code class="highlighter-rouge">window</code> object as a bridge. Or enable Mixed Context.</p>

<p>This hasn’t change from CEP7, so I’ll skip to the new stuff. Besides injecting in the global space <code class="highlighter-rouge">Buffer</code>, <code class="highlighter-rouge">global</code>, <code class="highlighter-rouge">process</code>, <code class="highlighter-rouge">require</code> and <code class="highlighter-rouge">module</code>, CEP 8 adds a new <code class="highlighter-rouge">cep_node</code> global, which has its own <code class="highlighter-rouge">Buffer</code>, <code class="highlighter-rouge">global</code>, <code class="highlighter-rouge">process</code> and <code class="highlighter-rouge">require</code> properties. These new props props are useful because now an <code class="highlighter-rouge">&lt;iframe&gt;</code> (which still needs to have its own <code class="highlighter-rouge">enable-nodejs</code> specified), is going access <code class="highlighter-rouge">cep_node</code>, that you can use as a bridge object between <code class="highlighter-rouge">&lt;iframe&gt;</code> elements when the <strong>Context is Separate</strong>. This marks a difference with CEP7, where Node globals were always available. Also, order of appearance is important to access data, see below:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;body&gt;</span>
  <span class="c">&lt;!-- Node globals: OK, cep_node:OK --&gt;</span>
  <span class="nt">&lt;iframe</span> <span class="na">src=</span><span class="s">"iframe1.html"</span> <span class="na">enable-nodejs</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- Node globals: NO, cep_node:OK --&gt;</span>
    <span class="c">&lt;!-- You can set node_cep props, and access them \*later\*, e.g.
    &lt;script&gt;
      cep_node.process.pippo = "Goofy";
    &lt;/script&gt; --&gt;</span>
  <span class="nt">&lt;/iframe&gt;</span>
  <span class="nt">&lt;iframe</span> <span class="na">src=</span><span class="s">"iframe2.html"</span> <span class="na">enable-nodejs</span><span class="nt">&gt;</span>
     <span class="c">&lt;!-- Node globals: NO, cep_node:OK --&gt;</span>
     <span class="c">&lt;!-- You can access node_cep props set \*before\*
    &lt;script&gt;
      console.log(cep_node.process.pippo); // "Goofy"
    &lt;/script&gt; --&gt;</span>
  <span class="nt">&lt;/iframe&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="c">&lt;!-- &lt;script&gt; tags belongs to iframe1.html and iframe2.html --&gt;</span></code></pre></figure>

<p>As opposed to the previous case and still specific to CEP8, with <strong>Mixed Context</strong> the Node globals are always available, everywhere (<code class="highlighter-rouge">&lt;iframe&gt;</code> elements included), but this time <code class="highlighter-rouge">cep_node</code> is rebuilt from scratch in each <code class="highlighter-rouge">&lt;iframe&gt;</code>.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;body&gt;</span>
  <span class="c">&lt;!-- Node globals: OK, cep_node:OK --&gt;</span>
  <span class="nt">&lt;iframe</span> <span class="na">src=</span><span class="s">"iframe1.html"</span> <span class="na">enable-nodejs</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- Node globals: OK, cep_node:OK --&gt;</span>
    <span class="c">&lt;!-- set node_cep props only for this iframe only, e.g.
    &lt;script&gt;
      cep_node.process.pippo = "Goofy";
    &lt;/script&gt; --&gt;</span>
  <span class="nt">&lt;/iframe&gt;</span>
  <span class="nt">&lt;iframe</span> <span class="na">src=</span><span class="s">"iframe2.html"</span> <span class="na">enable-nodejs</span><span class="nt">&gt;</span>
     <span class="c">&lt;!-- Node globals: OK, cep_node:OK --&gt;</span>
     <span class="c">&lt;!-- cep_node props set in another iframe are not available
    &lt;script&gt;
      console.log(cep_node.process.pippo); // undefined
    &lt;/script&gt; --&gt;</span>
  <span class="nt">&lt;/iframe&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="c">&lt;!-- &lt;script&gt; tags belongs to iframe1.html and iframe2.html --&gt;</span></code></pre></figure>

<p>What else: <code class="highlighter-rouge">module</code> and <code class="highlighter-rouge">exports</code> globals may conflict with some JS libraries, e.g. jQuery, resulting in the library being loaded in the Node context rather than in the Browser’s. As a fix, try:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- Insert above script imports --&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">module</span> <span class="o">===</span> <span class="s1">'object'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">module</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span> <span class="nx">module</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">===</span> <span class="s1">'object'</span><span class="p">)</span> <span class="p">{</span>
  	<span class="nb">window</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span> <span class="nx">exports</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="c">&lt;!-- JS imports --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"scripts/jquery.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"scripts/csinterface.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- Insert after JS imports, IF you need module, exports --&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">module</span><span class="p">)</span> <span class="nx">module</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">module</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">exports</span><span class="p">)</span> <span class="nx">exports</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>Oh, now in CEP 8 <code class="highlighter-rouge">require()</code> paths need to be absolute and not relative, like:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">	<span class="c1">// Replace this:</span>
	<span class="nx">require</span><span class="p">(</span><span class="s2">"./js/lib/javascriptobfuscator.js"</span><span class="p">);</span>

	<span class="c1">// With either this:</span>
	<span class="kd">var</span> <span class="nx">dir</span> <span class="o">=</span> <span class="nx">csInterface</span><span class="p">.</span><span class="nx">getSystemPath</span><span class="p">(</span><span class="s2">"extension"</span><span class="p">)</span>
	<span class="nx">require</span><span class="p">(</span><span class="nx">dir</span> <span class="o">+</span> <span class="s2">"/js/lib/javascriptobfuscator.js"</span><span class="p">);</span>

	<span class="c1">// Or:</span>
	<span class="nx">require</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s2">"/js/lib/javascriptobfuscator.js"</span><span class="p">);</span>  </code></pre></figure>

<p>And I’d say this sums up things for Node.js</p>

<h3 id="bugs">Bugs</h3>

<p>I’m listing here the known CEP 8 bugs, even the one already mentioned in the post.</p>

<ul>
  <li><code class="highlighter-rouge">Version="8.0"</code> in the <code class="highlighter-rouge">&lt;ExtensionManifest&gt;</code> and <code class="highlighter-rouge">&lt;RequiredRuntime&gt;</code> tags in <code class="highlighter-rouge">manifest.xml</code> (to match CEP version) makes the Panel disappear from the Extensions list.</li>
  <li><strong>Panel Geometry bug</strong>: setting <code class="highlighter-rouge">&lt;Size&gt;</code>, <code class="highlighter-rouge">&lt;MinSize&gt;</code> and <code class="highlighter-rouge">&lt;MaxSize&gt;</code> with equal values doesn’t produce a fixed size (unresizable) panel anymore, as it used to do with <em>any</em> other pre-2018 version. In order to make a fixed sized panel in 2018, set only the <code class="highlighter-rouge">&lt;Size&gt;</code> tag. That is to say: panel is fixed size in 2018 but not in CC, 2014, 2015, 2015.5, 2017 or the other way around. Very funny. Moreover, the very fist time a panel is collapsed/reopened, it assumes forever some completely wrong width/height, and may hide relevant content.</li>
  <li><strong>Bug with Panel Refresh</strong>: (either via ⌘+R on Chromium Dev Tools, or <code class="highlighter-rouge">window.location.reload(true)</code> in the panel). You may run into problems with Node after the first refresh unless you have both <code class="highlighter-rouge">--enable-nodejs</code> and <code class="highlighter-rouge">--mixed-context</code> flags set.</li>
  <li>As I mentioned before, setting the panel’s <code class="highlighter-rouge">window.location = "chrome://version"</code> <strong>doesn’t load the Chrome Version page in the Panel</strong> anymore – it used to work fine with CC 2017.</li>
  <li>Not really a bug, but be aware that some videos that used to play well (e.g. from YouTube) in CEP 7, won’t play at all in CEP 8. This is due to a WebM VP9 codec that Chromium doesn’t support anymore (the codec License doesn’t get along well with the Chromium Open Source License, so they dropped the support).</li>
</ul>

<h3 id="documentation">Documentation</h3>

<p>You can have a look at the official CEP 8 Cookbook <a href="https://github.com/Adobe-CEP/CEP-Resources/blob/master/CEP_8.x/Documentation/CEP%208.0%20HTML%20Extension%20Cookbook.md">here</a>. While writing this post, the <a href="https://github.com/Adobe-CEP/CEP-Resources/">CEP Github repository</a> still has no CEF Client (CEF Client has been added and is found <a href="https://github.com/Adobe-CEP/CEP-Resources/tree/master/CEP_8.x">here</a>), no updated ZXPSignCmd. Admins of the Adobe-CEP GitHub repository accepts push requests for the Cookbook, so users are allowed / encouraged to make the documentation better!</p>

<hr />

<h3 id="the-photoshop-html-panels-development-course">The Photoshop HTML Panels Development Course</h3>

<figure class="alignleft">
  <a href="https://htmlpanelsbook.com" target="_blank">
	<img src="/wp-content/uploads/2016/03/BookVideo.jpg" alt="Photoshop HTML Panels Development course" /></a>
	<figcaption>Updated to CC 2019.</figcaption>
</figure>

<p>If you’re reading here, you might be interested in my Photoshop Panels development – so let me inform you that I’ve authored a full course:</p>

<ul>
  <li><strong>300 pages</strong> PDF</li>
  <li><strong>3 hours</strong> of HD screencasts</li>
  <li><strong>28 custom Panels</strong> with commented code</li>
</ul>

<p><a href="http://htmlpanelsbook.com">Check it out!</a> Please help me spread the news – I’ll be able to keep producing more exclusive content on this blog. Thank you!</p>


    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=HTML Panel Tips #25: CC 2018 Survival Guide&p[summary]=That time of the year has come, and Photoshop CC 2018 is here. Read along to find out Everything You Always Wanted to Know About CEP 8 (B...&p[url]=https://elegant-davinci-7a1889.netlify.com/2017/10/html-panel-tips-25-cc-2018-survival-guide/" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://elegant-davinci-7a1889.netlify.com/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=https://elegant-davinci-7a1889.netlify.com/2017/10/html-panel-tips-25-cc-2018-survival-guide/&text=That time of the year has come, and Photoshop CC 2018 is here. Read along to find out Everything You Always Wanted to Know About CEP 8 (B...&hashtags=CC 2018,HTML Panels Tips," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://elegant-davinci-7a1889.netlify.com/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="https://elegant-davinci-7a1889.netlify.com/tag/CC 2018">CC 2018</a></li>
                
                <li><a href="https://elegant-davinci-7a1889.netlify.com/tag/HTML Panels Tips">HTML Panels Tips</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>


<aside class="comments" role="complementary">
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function () {
            this.page.url = 'https://elegant-davinci-7a1889.netlify.com/2017/10/html-panel-tips-25-cc-2018-survival-guide/';
            this.page.identifier = '10/23/2017';
        };
        (function() {
            var d = document, s = d.createElement('script');

            s.src = '//davidebarranca.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
</aside>


            </main>
        </div>

        <script src="https://elegant-davinci-7a1889.netlify.com/assets/js/jquery-1.12.2.min.js"></script>
<script src="https://elegant-davinci-7a1889.netlify.com/assets/js/backtotop.js"></script>
<script src="https://elegant-davinci-7a1889.netlify.com/assets/js/lunr.min.js"></script>
<script src="https://elegant-davinci-7a1889.netlify.com/assets/js/lunr-feed.js"></script>
<script src="https://elegant-davinci-7a1889.netlify.com/assets/js/jquery.fitvids.js"></script>
<script src="https://elegant-davinci-7a1889.netlify.com/assets/js/svg4everybody.min.js"></script>
<script src="https://elegant-davinci-7a1889.netlify.com/assets/js/scripts.js"></script>


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-25716894-1', 'auto');
        ga('send', 'pageview');
    </script>

    </body>
</html>