<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>HTML Panels Tips #16 AngularJS Binding bug patch | Davide Barranca &mdash; Photoshop, etc. </title>
    <meta property="og:title" content="HTML Panels Tips #16 AngularJS Binding bug patch | Davide Barranca &mdash; Photoshop, etc. " />
    <meta name="twitter:title" content="HTML Panels Tips #16 AngularJS Binding bug patch | Davide Barranca &mdash; Photoshop, etc. " />

    <meta name="description" content="CEP5.2 has a bug affecting MacOS and non-US keyboards that may prevent AngularJS binding to work. Here's how to apply a patch to angular.js">
    <meta name="description" property="og:description" content="CEP5.2 has a bug affecting MacOS and non-US keyboards that may prevent AngularJS binding to work. Here's how to apply a patch to angular.js" />
    <meta name="twitter:description" content="CEP5.2 has a bug affecting MacOS and non-US keyboards that may prevent AngularJS binding to work. Here's how to apply a patch to angular.js" />

    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:site" content="@undavide" />
    
    <meta property="og:url" content="http://localhost:4000/2014/12/html-panels-tips-16-angularjs-input-binding-bug-patch/" />

    <meta property="og:image" content="" />
    <meta name="twitter:image" content="" />

    <meta name="author" content="Davide Barranca" />

    <meta name="copyright" content="Copyright by Davide Barranca. All Rights Reserved." />

    <style>
        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 300;
            src: local('Roboto Light'), local('Roboto-Light'), url(https://fonts.gstatic.com/s/roboto/v15/Hgo13k-tfSpn0qi1SFdUfVtXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 400;
            src: local('Roboto'), local('Roboto-Regular'), url(https://fonts.gstatic.com/s/roboto/v15/CWB0XYA8bzo0kSThX0UTuA.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 700;
            src: local('Roboto Bold'), local('Roboto-Bold'), url(https://fonts.gstatic.com/s/roboto/v15/d-6IYplOFocCacKzxwXSOFtXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: normal;
            font-weight: 900;
            src: local('Roboto Black'), local('Roboto-Black'), url(https://fonts.gstatic.com/s/roboto/v15/mnpfi9pxYH-Go5UiibESIltXRa8TVwTICgirnJhmVJw.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 300;
            src: local('Roboto Light Italic'), local('Roboto-LightItalic'), url(https://fonts.gstatic.com/s/roboto/v15/7m8l7TlFO-S3VkhHuR0at44P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 400;
            src: local('Roboto Italic'), local('Roboto-Italic'), url(https://fonts.gstatic.com/s/roboto/v15/vPcynSL0qHq_6dX7lKVByfesZW2xOQ-xsNqO47m55DA.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 700;
            src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(https://fonts.gstatic.com/s/roboto/v15/t6Nd4cfPRhZP44Q5QAjcC44P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }

        @font-face {
            font-family: 'Roboto';
            font-style: italic;
            font-weight: 900;
            src: local('Roboto Black Italic'), local('Roboto-BlackItalic'), url(https://fonts.gstatic.com/s/roboto/v15/bmC0pGMXrhphrZJmniIZpY4P5ICox8Kq3LLUNMylGO4.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
        }
    </style>
    
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    
    <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

    <link rel="canonical" href="http://localhost:4000/2014/12/html-panels-tips-16-angularjs-input-binding-bug-patch/">

    <link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

    

    
    <script>
      function UnCryptMailto(s) {
        var n = 0;
        var r = "";
        for (var i = 0; i < s.length; i++) {
          n = s.charCodeAt(i);
          if (n >= 8364) {
            n = 128;
          }
          r += String.fromCharCode(n - 1);
        }
        return r;
      }

      function linkTo_UnCryptMailto(s) {
        location.href = UnCryptMailto(s);
      }
    </script>
    
</head>


    <body>
        <div class="wrapper">
            <aside class="user-profile fixed" role="complementary">
    <div class="burger">
        <input class="trigger hidden" id="toggleBurger" type="checkbox" />
        <label for="toggleBurger">
            <span>Navigation</span>
        </label>
    </div>

    <div class="compact-header">
        <a class="avatar" href="http://localhost:4000"><img alt="Avatar" src="/assets/img/io.jpg" /></a>
        <div class="my-info">
            <strong class="my-name">Davide Barranca</strong>
            <span class="my-job-title">Photoshop, etc.</span>
        </div>
    </div>

    
        
        <div class="mainmenu">
            <a href="http://localhost:4000" >Blog</a>
            
                
            
                
            
                
            
                
                    <a href="http://localhost:4000/courses/" >Courses</a>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        </div>
        
    

    <p class="about-me">Digital Caveman. Photoshop retoucher and script/panels developer. I am also an author, check the Courses page!</p>

    <ul class="socials">
        <li><a href="https://www.facebook.com/undavide"><svg title="facebook" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:4000/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></li><li><a href="https://twitter.com/undavide"><svg title="twitter" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:4000/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li><li><a href="https://github.com/undavide"><svg title="github" width="16" height="16" ><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:4000/assets/svg/social-icons.svg#github-icon"></use></svg></a></li>

        
            <!-- WAS: <a href="mailto:davide.barranca@gmail.com">  -->
            <li><a href="javascript:linkTo_UnCryptMailto('nbjmup;ebwjef/cbssbodbAhnbjm/dpn');" title="Drop me an email"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:4000/assets/svg/social-icons.svg#email-icon"></use></svg></a></li>
        

        
         <li><a href="http://localhost:4000/feed.xml"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:4000/assets/svg/social-icons.svg#rss-icon"></use></svg></a></li>
        
    </ul>
</aside>


            <main class="the-content" role="main">
                <div class="search" role="search">
    <div>
        <div class="show-results-count">0 Results</div>
        <div class="search-holder">
            <input type="text" id="search-input" placeholder="search for..." />
        </div>
    </div>
    <ul id="results-container" class="results-container"></ul>
</div>


                <article class="post single" role="article" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <ul>
            <li><time datetime="2014-12-05T16:13:36+01:00" itemprop="datePublished">5 Dec, 2014</time></li>
            
                
                <li class="cats">
                    
                        <a href="/categories/CEP/">CEP</a>
                    
                </li>
                
            
        </ul>
        <h2 itemprop="name headline">HTML Panels Tips #16 AngularJS Binding bug patch</h2>
    </header>

    <div class="post-content">
        <p>CEP 5.2 has a bug (affecting Macs with non US keyboards) that prevents AngularJS to realize binding in HTML Panels when input fields are involved. New Zealand developer <a href="https://www.rorohiko.com" title="Rorohiko Workflow Resources">Kris Coppieters</a> has been able to find a successful way to patch Angular and make it work - with his kind permission I’m going to share the instruction.</p>

<h2 id="the-input-bug">The input bug</h2>

<p>First, what am I talking about? See it yourself with this code:</p>

<iframe width="100%" height="160" src="https://jsfiddle.net/01k8u5fw/4/embedded/result,js,html" frameborder="0"></iframe>

<p>In the browser, the text input and the h2 are bound to the same ng-model, so what you type in the input area is immediately reflected in the h2, as you’d expect. First thing that you learn in Angular tutorials: binding.</p>

<p>Now, it happens that in <strong>Mac OSX with non-US keyboards</strong> (you can change that in the Preferences and see it yourself) <strong>the keypress / input event is fired only when a backspace is typed</strong>, so that:</p>

<ol>
  <li>You type “Ciao” here and nothing happens there.</li>
  <li>You hit Backspace, so: “Cia” - this triggers the binding and the text appears in the h2.</li>
</ol>

<p>The above is utterly annoying imho, and verified in several Adobe application (PS included). Kris Coppieters has been able to patch the angular.js file so that binding works again - please visit his <a href="https://www.rorohiko.com" title="Kris Coppieters website">Rorohiko Workflow Resources</a> website as a way to say thanks (he’s an InDesign automation developer).</p>

<p>I’ll be quoting Kris extensively [my comments are inline in square brackets].</p>

<h2 id="angular-patch">Angular Patch</h2>

<p>[Basically it’s a matter of modifying two files in the AngularJS source, then compile the patched build] Check out the desired Angular source code. It can be found at: <a href="https://github.com/angular/angular.js" title="angular.js on GitHub">https://github.com/angular/angular.js</a> Use the repository URL: <a href="https://github.com/angular/angular.js.git" title="AngularJS repository on GitHub">https://github.com/angular/angular.js.git</a>.</p>

<p>In SourceTree or whatever your favorite git client is, clone the repo to your local hard disk. Find the desired version - e.g. for version 1.2.15, the commit is <em>a9b5a10</em>, dated Mar 22, 2014. I use the ‘Jump to’ functionality [top right corned in the interface] in SourceTree to jump to the 1.2.15 label. Create a local branch from that label and name your local branch to something descriptive. The patched version of Angular will detect:</p>

<ul>
  <li>That it is running on CEP5 in a Creative Cloud product.</li>
  <li>What platform (Mac vs. non-Mac) it is running on.</li>
</ul>

<p>If it is running on CEP5, and it is on a Mac, then the <code class="highlighter-rouge">$SnifferProvider</code> in the Angular source code is set to avoid using the ‘input’ event. The input event is currently (December, 2014) broken, and only fires when the backspace key is hit; it does not fire for other events. Oddly enough, this seems like a reversal of the broken behavior of IE9 (which does not emit the ‘input’ event when backspace is used, whereas CEP seems to suppress the ‘input’ event for everything except backspace).</p>

<p>The standard $<code class="highlighter-rouge">SnifferProvider</code> avoids using ‘input’ when running on IE9. The code I’ve added also avoids using ‘input’ when running on Macintosh CEP5/CC. This cures the ‘keyboard language dependency’ issue with panels ignoring the field contents on Macs with non-US keyboards. I changed two files:</p>

<ol>
  <li><code class="highlighter-rouge">src/Angular.js</code></li>
  <li><code class="highlighter-rouge">src/ng/sniffer.js</code></li>
</ol>

<p>The patch consists of:</p>

<h3 id="step-1">Step 1</h3>

<p>Near the very top of the <code class="highlighter-rouge">src/Angular.js</code> file, find the jsLint info for <code class="highlighter-rouge">msie</code>. Add two new variables to the list: <code class="highlighter-rouge">isCreativeCloudCEP</code> and <code class="highlighter-rouge">isMacintosh</code>. Mimic the syntax that is used for <code class="highlighter-rouge">msie</code> for these two variables: this is where version Angular 1.2.x and 1.3.x look somewhat different. Angular <strong>1.2.x</strong></p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="s1">'use strict'</span><span class="p">;</span>
<span class="cm">/* We need to tell jshint what variables are being exported */</span>
<span class="cm">/* global
    -angular,
    -msie,
    -isCreativeCloudCEP,
    -isMacintosh,
    -jqLite,
...
*/</span></code></pre></figure>

<p>Angular <strong>1.3.x</strong></p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="s1">'use strict'</span><span class="p">;</span>
<span class="cm">/* We need to tell jshint what variables are being exported */</span>
<span class="cm">/* global angular: true,
  msie: true,
  isCreativeCloudCEP: true,
  isMacintosh: true,
  jqLite: true,
...
*/</span></code></pre></figure>

<h3 id="step-2">Step 2</h3>

<p>2) Find <code class="highlighter-rouge">msie</code> in the list of variables being defined, and again add similar declarations for variables <code class="highlighter-rouge">isCreativeCloudCEP</code> and <code class="highlighter-rouge">isMacintosh</code> right behind it. For Angular <strong>1.2.x</strong> (around line 136):</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="cm">/** holds major version number for IE or NaN for real browsers */</span>
    <span class="nx">msie</span><span class="p">,</span>
    <span class="nx">isCreativeCloudCEP</span><span class="p">,</span>
    <span class="nx">isMacintosh</span><span class="p">,</span>
    <span class="nx">jqLite</span><span class="p">,</span>           <span class="c1">// delay binding since jQuery could be loaded after us.</span></code></pre></figure>

<p>For Angular <strong>1.3.x</strong> (around line 167):</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span>
    <span class="nx">msie</span><span class="p">,</span>             
    <span class="c1">// holds major version number for IE, or NaN if UA is not IE.</span>
    <span class="nx">isCreativeCloudCEP</span><span class="p">,</span>
    <span class="nx">isMacintosh</span><span class="p">,</span>
    <span class="nx">jqLite</span><span class="p">,</span>           
    <span class="c1">// delay binding since jQuery could be loaded after us.</span></code></pre></figure>

<h3 id="step-3">Step 3</h3>

<p>A little bit further find the lines where <code class="highlighter-rouge">msie</code> is assigned and add the following statements for <code class="highlighter-rouge">isCreativeCloudCEP</code> and <code class="highlighter-rouge">isMacintosh</code>. For Angular <strong>1.2.x</strong> (around line 155):</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="cm">/**
 * IE 11 changed the format of the UserAgent string.
 * See https://msdn.microsoft.com/en-us/library/ms537503.aspx
 */</span>
<span class="nx">msie</span> <span class="o">=</span> <span class="kr">int</span><span class="p">((</span><span class="sr">/msie </span><span class="se">(\d</span><span class="sr">+</span><span class="se">)</span><span class="sr">/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">lowercase</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">))</span> <span class="o">||</span> <span class="p">[])[</span><span class="mi">1</span><span class="p">]);</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">msie</span><span class="p">))</span> <span class="p">{</span>
  <span class="nx">msie</span> <span class="o">=</span> <span class="kr">int</span><span class="p">((</span><span class="sr">/trident</span><span class="se">\/</span><span class="sr">.*; rv:</span><span class="se">(\d</span><span class="sr">+</span><span class="se">)</span><span class="sr">/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">lowercase</span><span class="p">(</span><span class="nb">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">))</span> <span class="o">||</span> <span class="p">[])[</span><span class="mi">1</span><span class="p">]);</span>
<span class="p">}</span>

<span class="cm">/* CEP Patch */</span>
<span class="nx">isCreativeCloudCEP</span> <span class="o">=</span> <span class="s2">"object"</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nb">window</span><span class="p">.</span><span class="nx">__adobe_cep__</span><span class="p">;</span>
<span class="nx">isMacintosh</span> <span class="o">=</span> <span class="nb">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">"Macintosh"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span></code></pre></figure>

<p>For Angular <strong>1.3.x</strong> (around line 184):</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="cm">/**
 * documentMode is an IE-only property
 * https://msdn.microsoft.com/en-us/library/ie/cc196988(v=vs.85).aspx
 */</span>
<span class="nx">msie</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentMode</span><span class="p">;</span>

<span class="cm">/* CEP Patch */</span>
<span class="nx">isCreativeCloudCEP</span> <span class="o">=</span> <span class="s2">"object"</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nb">window</span><span class="p">.</span><span class="nx">__adobe_cep__</span><span class="p">;</span>
<span class="nx">isMacintosh</span> <span class="o">=</span> <span class="nb">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">"Macintosh"</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span></code></pre></figure>

<h3 id="step-4">Step 4</h3>

<p>In the file <code class="highlighter-rouge">src/ng/sniffer.js</code> find these lines and add right behind it a conditional. For Angular <strong>1.2.x</strong> (around line 71):</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// IE9 implements 'input' event it's so fubared that we rather pretend that it doesn't have</span>
<span class="c1">// it. In particular the event is not fired when backspace or delete key are pressed or</span>
<span class="c1">// when cut operation is performed.</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">event</span> <span class="o">==</span> <span class="s1">'input'</span> <span class="o">&amp;&amp;</span> <span class="nx">msie</span> <span class="o">==</span> <span class="mi">9</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// CEP Patch</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">event</span> <span class="o">==</span> <span class="s1">'input'</span> <span class="o">&amp;&amp;</span> <span class="nx">isMacintosh</span> <span class="o">&amp;&amp;</span> <span class="nx">isCreativeCloudCEP</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></code></pre></figure>

<p>For Angular <strong>1.3.x</strong> (around line 67):</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// IE9 implements 'input' event it's so fubared that we rather pretend that it doesn't have</span>
<span class="c1">// it. In particular the event is not fired when backspace or delete key are pressed or</span>
<span class="c1">// when cut operation is performed.</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">event</span> <span class="o">==</span> <span class="s1">'input'</span> <span class="o">&amp;&amp;</span> <span class="nx">msie</span> <span class="o">==</span> <span class="mi">9</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// CEP Patch</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">event</span> <span class="o">==</span> <span class="s1">'input'</span> <span class="o">&amp;&amp;</span> <span class="nx">isMacintosh</span> <span class="o">&amp;&amp;</span> <span class="nx">isCreativeCloudCEP</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span></code></pre></figure>

<h3 id="step-5">Step 5</h3>

<p>A little bit further, find the last returned objects and add <code class="highlighter-rouge">isMacintosh</code> and <code class="highlighter-rouge">isCreativeCloudCEP</code>. For Angular <strong>1.2.x</strong> (around line 89):</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">msie</span> <span class="p">:</span> <span class="nx">msie</span><span class="p">,</span>

<span class="c1">// CEP Patch</span>
<span class="nx">isMacintosh</span><span class="p">:</span> <span class="nx">isMacintosh</span><span class="p">,</span>
<span class="nx">isCreativeCloudCEP</span><span class="p">:</span> <span class="nx">isCreativeCloudCEP</span></code></pre></figure>

<p>For Angular <strong>1.3.x</strong> (around line 82):</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">csp</span><span class="p">:</span> <span class="nx">csp</span><span class="p">(),</span>
<span class="nx">vendorPrefix</span><span class="p">:</span> <span class="nx">vendorPrefix</span><span class="p">,</span>
<span class="nx">transitions</span><span class="p">:</span> <span class="nx">transitions</span><span class="p">,</span>
<span class="nx">animations</span><span class="p">:</span> <span class="nx">animations</span><span class="p">,</span>
<span class="nx">android</span><span class="p">:</span> <span class="nx">android</span><span class="p">,</span>

<span class="c1">// CEP Patch</span>
<span class="nx">isMacintosh</span><span class="p">:</span> <span class="nx">isMacintosh</span><span class="p">,</span>
<span class="nx">isCreativeCloudCEP</span><span class="p">:</span> <span class="nx">isCreativeCloudCEP</span></code></pre></figure>

<h3 id="step-6">Step 6</h3>

<p>Compile a new version of Angular: you will need to install node.js, grunt, bower… I won’t explain that here - it’s a matter of visiting <a href="https://docs.angularjs.org/misc/contribute" title="AngularJS contribute page">Angular Contribute page</a> and the node.js web site and following instructions. Build angular as documented on the Angular ‘contribute’ page, then go into the build folder, and extract <code class="highlighter-rouge">angular.min.js</code> from the final .zip file. This is your patched version - it’s a drop-in replacement for the standard <code class="highlighter-rouge">angular.min.js</code> version that you branched off from.</p>

<h2 id="follow-up---building-angular">Follow-up - building Angular</h2>

<p>Let’s thank again Kris Coppieters for the instruction so far - I will add a brief section about building Angular, which hasn’t been as straightforward as I assumed first.</p>

<h3 id="installing-dependencies">Installing Dependencies</h3>

<p>Quoting from Angular website:</p>

<blockquote>
  <p>Before you can build AngularJS, you must install and configure the following dependencies on your machine: <a href="https://git-scm.com/">Git</a>: The <a href="https://help.github.com/articles/set-up-git">Github Guide to Installing Git</a> is a good source of information. <a href="https://nodejs.org/">Node.js</a>: We use Node to generate the documentation, run a development web server, run tests, and generate distributable files. Depending on your system, you can install Node either from source or as a pre-packaged bundle. <a href="https://www.java.com/">Java</a>: We minify JavaScript using our <a href="https://developers.google.com/closure/">Closure Tools</a> jar. Make sure you have Java (version 7 or higher) installed and included in your <a href="https://docs.oracle.com/javase/tutorial/essential/environment/paths.html">PATH</a> variable. <a href="https://gruntjs.com/">Grunt</a>: We use Grunt as our build system. Install the grunt command-line tool globally with: <code class="highlighter-rouge">npm install -g grunt-cli</code> <a href="https://bower.io/">Bower</a>: We use Bower to manage client-side packages for the docs. Install the bower command-line tool globally with: <code class="highlighter-rouge">npm install -g bower</code> <strong>Note</strong>: You may need to use sudo (for OSX, *nix, BSD etc) or run your command shell as Administrator (for Windows) to install Grunt &amp; Bower globally.</p>
</blockquote>

<p>This has been easy, no problem to me - by the way I already had everything needed, chances are you too already rely on those tools. Things get slightly worse when:</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c"># Install node.js dependencies:</span>
npm <span class="nb">install</span>

<span class="c"># Install bower components:</span>
bower <span class="nb">install</span>

<span class="c"># Build AngularJS:</span>
grunt package</code></pre></figure>

<p>First <strong>npm</strong>: I’ve had lots of unmet dependencies with npm (Mac users should <code class="highlighter-rouge">**sudo** npm install</code>):</p>

<p><img src="/wp-content/uploads/2014/12/unmet-dependencies.png" alt="unmet-dependencies" /></p>

<p>Which I ignored. No apparent problem with <strong>bower</strong>, but when it came to <code class="highlighter-rouge">grunt package</code> the command stopped because of some missing module, like:</p>

<p><img src="/wp-content/uploads/2014/12/missing-packages.png" alt="missing-packages" /></p>

<p>In this case as you can see in the first Error line, the ‘clone-stats’ package couldn’t be found, so went on with <code class="highlighter-rouge">npm install clone-stats</code>, then <code class="highlighter-rouge">grunt package</code> again. I run into several missing modules, so I kept  <code class="highlighter-rouge">npm install this-and-that</code> and then <code class="highlighter-rouge">grunt package</code> on and on. Until the missing package appeared to be a local module such as:</p>

<p><img src="/wp-content/uploads/2014/12/local-lib.png" alt="local-lib" /></p>

<p>Then I gave up - by the way, this happened while running the “docs” task (which I’m not interested into), the compilation of both regular and minified version of <code class="highlighter-rouge">angular.js</code> was already done so I could grab the file and use it. And, good news, it works :-)</p>

<h2 id="tldr">TL;DR</h2>

<p>Are you having problems with AngularJS binding the model to an input field? Chances are you’re on a Mac with non-US keyboard (and if you’re not, your users can be). This is a known issue of CEP5.2. <a href="https://www.rorohiko.com" title="Rorohiko Workflow Resources">Kris Coppieters</a> came up with an Angular patch that you can apply - if you’re lazy, just grab the patched version of <a href="/wp-content/uploads/2014/12/angular-1.2.9.zip">Angular-1.2.9</a> and <a href="/wp-content/uploads/2014/12/angular-1.3.5.zip">Angular-1.3.5</a>.</p>

<hr />

<h3 id="the-photoshop-html-panels-development-course">The Photoshop HTML Panels Development Course</h3>

<figure class="alignleft">
  <a href="https://htmlpanelsbook.com" target="_blank">
	<img src="/wp-content/uploads/2016/03/BookVideo.jpg" alt="Photoshop HTML Panels Development course" /></a>
	<figcaption>Updated to CC 2019.</figcaption>
</figure>

<p>If you’re reading here, you might be interested in my Photoshop Panels development – so let me inform you that I’ve authored a full course:</p>

<ul>
  <li><strong>300 pages</strong> PDF</li>
  <li><strong>3 hours</strong> of HD screencasts</li>
  <li><strong>28 custom Panels</strong> with commented code</li>
</ul>

<p><a href="http://htmlpanelsbook.com">Check it out!</a> Please help me spread the news – I’ll be able to keep producing more exclusive content on this blog. Thank you!</p>


    </div>

    <footer class="post-footer">
        <div class="share">Share
            <ul class="social-networks">
                <li class="share-facebook"><a href="https://www.facebook.com/sharer.php?s=100&p[title]=HTML Panels Tips #16 AngularJS Binding bug patch&p[summary]=CEP 5.2 has a bug (affecting Macs with non US keyboards) that prevents AngularJS to realize binding in HTML Panels when input fields are ...&p[url]=http://localhost:4000/2014/12/html-panels-tips-16-angularjs-input-binding-bug-patch/" class="s_facebook" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:4000/assets/svg/social-icons.svg#facebook-icon"></use></svg></a></li>
                <li class="share-twitter"><a href="http://twitter.com/share?url=http://localhost:4000/2014/12/html-panels-tips-16-angularjs-input-binding-bug-patch/&text=CEP 5.2 has a bug (affecting Macs with non US keyboards) that prevents AngularJS to realize binding in HTML Panels when input fields are ...&hashtags=HTML Panels Tips,AngularJS," rel="noreferrer" target="_blank" onclick="window.open(this.href, '','width=700,height=300');return false;"><svg title="" width="16" height="16"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:4000/assets/svg/social-icons.svg#twitter-icon"></use></svg></a></li>
            </ul>
        </div>
        
        <div class="tags">
            <ul>
                
                <li><a href="http://localhost:4000/tag/HTML Panels Tips">HTML Panels Tips</a></li>
                
                <li><a href="http://localhost:4000/tag/AngularJS">AngularJS</a></li>
                
            </ul>
        </div>
        
    </footer>
</article>


<aside class="comments" role="complementary">
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function () {
            this.page.url = 'http://localhost:4000/2014/12/html-panels-tips-16-angularjs-input-binding-bug-patch/';
            this.page.identifier = '12/5/2014';
        };
        (function() {
            var d = document, s = d.createElement('script');

            s.src = '//davidebarranca.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
</aside>


            </main>
        </div>

        <script src="http://localhost:4000/assets/js/jquery-1.12.2.min.js"></script>
<script src="http://localhost:4000/assets/js/backtotop.js"></script>
<script src="http://localhost:4000/assets/js/lunr.min.js"></script>
<script src="http://localhost:4000/assets/js/lunr-feed.js"></script>
<script src="http://localhost:4000/assets/js/jquery.fitvids.js"></script>
<script src="http://localhost:4000/assets/js/svg4everybody.min.js"></script>
<script src="http://localhost:4000/assets/js/scripts.js"></script>


    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-25716894-1', 'auto');
        ga('send', 'pageview');
    </script>


 <script id="dsq-count-scr" src="//davidebarranca.disqus.com/count.js" async></script>

    </body>
</html>